<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jarvis Visual Engine</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const STORY = {
            "start": {
                text: "The gates of the Silver City loom over you. A Paladin stands guard.",
                image: "https://images.unsplash.com/photo-1599408162165-433b1424ba0d?auto=format&fit=crop&w=800",
                choices: [{ label: "Approach Paladin", next: "paladin" }]
            },
            "paladin": {
                text: "Paladin: 'Halt! Only heroes may enter. Will you hunt the forest goblins?'",
                image: "https://images.unsplash.com/photo-1519074063912-ad2a609b6d47?auto=format&fit=crop&w=800",
                choices: [
                    { label: "Accept Quest", next: "quest_start", action: "ACCEPT_QUEST" },
                    { label: "Refuse", next: "refused" }
                ]
            },
            "quest_start": {
                text: "The Paladin hands you a sword. 'Do not return until the task is done.'",
                image: "https://images.unsplash.com/photo-1589492477829-5e65395b66cc?auto=format&fit=crop&w=800",
                choices: [{ label: "Go to Forest", next: "forest" }]
            },
            "refused": {
                text: "The Paladin scoffs. 'Then begone, peasant.'",
                image: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&w=800",
                choices: [{ label: "Try again", next: "start" }]
            },
            "forest": {
                text: "The forest is dark. You feel the weight of the Paladin's sword in your hand.",
                image: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&fit=crop&w=800",
                choices: [{ label: "Hunt Goblins", next: "start" }]
            }
        };

        function App() {
            const [sceneId, setSceneId] = useState('start');
            const [hasQuest, setHasQuest] = useState(false);
            const scene = STORY[sceneId];

            const handleChoice = (choice) => {
                if (choice.action === "ACCEPT_QUEST") setHasQuest(true);
                setSceneId(choice.next);
            };

            return (
                <div className="h-screen w-full relative overflow-hidden flex flex-col justify-end p-6">
                    <div className="absolute inset-0 bg-cover bg-center transition-all duration-1000" style={{backgroundImage: `url(${scene.image})`}}>
                        <div className="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent" />
                    </div>

                    <div className="relative z-10 w-full max-w-lg mx-auto space-y-4">
                        {/* Quest Badge */}
                        {hasQuest && (
                            <div className="inline-block px-3 py-1 bg-amber-500/20 border border-amber-500 text-amber-500 text-[10px] font-bold rounded-full animate-pulse uppercase">
                                Active Quest: Goblin Hunt
                            </div>
                        )}

                        <div className="bg-white/10 backdrop-blur-xl border border-white/20 p-6 rounded-3xl shadow-2xl">
                            <p className="text-xl font-light mb-6">"{scene.text}"</p>
                            <div className="space-y-3">
                                {scene.choices.map((c, i) => (
                                    <button key={i} onClick={() => handleChoice(c)} 
                                            className="w-full py-4 rounded-2xl bg-white text-black font-bold active:scale-95 transition-transform">
                                        {c.label}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
